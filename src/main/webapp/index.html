
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>San Francisco State University - Computer Science</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.deep_purple-pink.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .general {
        }

        .full-width {
            width: 100%;
        }

        .background-color-white {
            background-color: white;
        }

        .vertical-padding {
            height: 2em;
        }

        .display-none {
            display: none;
        }
    </style>
    <script src="date.format.js" type="application/javascript"></script>
    <script>
        var spinner_count = 0;
        var token = "";

        function show_spinner() {
            spinner_count++;
            if (spinner_count == 1) {
                $("#spinner").addClass("is-active");
            }
        }

        function hide_spinner() {
            spinner_count--;
            if (spinner_count == 0) {
                $("#spinner").removeClass("is-active");
            }
        }

        function show_toast() {
            var snackbarContainer = document.querySelector('#toast');
            var data = {message: 'Information saved...'};
            snackbarContainer.MaterialSnackbar.showSnackbar(data);
        }

        function login() {
            $('#passwd').blur();
            var passwd = document.getElementById("passwd");
            $.post("login", {passwd: passwd.value}, function(data, status) {
                token = data;
                var section_navigation = document.getElementById("navigation");
                var section_main = document.getElementById("section_main");
                var section_login = document.getElementById("section_login");
                section_navigation.style.display = (token === "") ? "none" : "block";
                section_main.style.display = (token === "") ? "none" : "block";
                section_login.style.display = (token === "") ? "block" : "none";
                if (token === "") {
                    $("#passwd").parent().addClass("is-invalid");
                }
            });
            return false;
        }
/*        function student_login() {

            var section_main_read_only = document.getElementById("senior_advising_read_only");
            section_main_read_only.style.display = "block";
            section_login.style.display = "none";
            return false;
        }*/

        function show_print_page() {
            var printWindow = window.open("", "", "width=800, height=800");
            var info = document.getElementById("student_info");
            var htmlPrint = '<html><head><title>Transcript</title><link rel="stylesheet" href="material-print.css"/></head><body>' + info.innerHTML + '</body></html>';
            printWindow.document.write(htmlPrint);
            printWindow.document.close();
        }

        function lookup_student() {
            $('#student_id').blur();
            var id = document.getElementById("student_id");
            var section = document.getElementById("section_student_info");
            var info = document.getElementById("student_info");
            // if (readonly =="true"){
            //     id = document.getElementById("student_id_ro");
            //     section = document.getElementById("section_student_info_ro");
            //     info = document.getElementById("student_info_ro");
            // }

            section.style.display = "none";
            show_spinner();
            $.post("lookup-student", {token: token, id: id.value}, function(data, status) {
                console.log(token);
                info.innerHTML = data;
                componentHandler.upgradeAllRegistered();
                section.style.display = "block";
                hide_spinner();
            });
            console.log(id.value)
            return false;
        }

        function update_comment(id, course) {
            var commentNode = document.getElementById(course);
            var comment = commentNode.value;
            // Write back the attribute so that later innerHtml will read the updated values
            // for the printing page
            commentNode.setAttribute('value', comment);
            show_spinner();
            $.post("update-comment", {token: token, id: id, course: course, comment: comment}, function(data, status) {
                hide_spinner();
                show_toast();
            });
            return false;
        }

        function update_checkpoints(id) {
            var studentFirstName = document.getElementById('student_first_name').value;
            var studentLastName = document.getElementById('student_last_name').value;
            var studentEmail = document.getElementById('student_email').value;
            var checkpointOralPresentationNode = document.getElementById('date_oral_presentation');
            var checkpointAdvising413Node = document.getElementById('date_advising_413');
            var checkpointSubmittedApplNode = document.getElementById('date_submitted_appl');
            var commentsNode = document.getElementById('comments');

            var checkpointOralPresentation = checkpointOralPresentationNode.value;
            var checkpointAdvising413 = checkpointAdvising413Node.value;
            var checkpointSubmittedAppl = checkpointSubmittedApplNode.value;
            var comments = commentsNode.value;
            var pattern =/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;
            if (checkpointOralPresentation != ""){
                if (!(pattern.test(checkpointOralPresentation))) {
                    alert("Oral Presentation date in wrong format. Must be MM/DD/YYYY")
                    return false;
                }
            }
            if (checkpointAdvising413 != ""){
                if (!(pattern.test(checkpointAdvising413))){
                    alert("413 Advising date in wrong format. Must be MM/DD/YYYY")
                    return false;
                }
            }
            if (checkpointSubmittedAppl != "") {
                if (!(pattern.test(checkpointSubmittedAppl))){
                    alert("Graduate Application date in wrong format. Must be MM/DD/YYYY")
                    return false;
                }
            }

            // Write back the attribute so that later innerHtml will read the updated values
            // for the printing page
            checkpointOralPresentationNode.setAttribute('value', checkpointOralPresentation);
            checkpointAdvising413Node.setAttribute('value', checkpointAdvising413);
            checkpointSubmittedApplNode.setAttribute('value', checkpointSubmittedAppl);
            commentsNode.setAttribute('value', comments);

            var e = document.querySelector('#label_oral_presentation').MaterialSwitch;
            if (checkpointOralPresentation !== "") {
                e.on();
            } else {
                e.off();
            }

            e = document.querySelector('#label_advising_413').MaterialSwitch;
            if (checkpointAdvising413 !== "") {
                e.on();
            } else {
                e.off();
            }

            e = document.querySelector('#label_submitted_appl').MaterialSwitch;
            if (checkpointSubmittedAppl !== "") {
                e.on();
            } else {
                e.off();
            }

            show_spinner();
            $.post("update-checkpoints", {token: token, id: id,
                studentFirstName: studentFirstName,
                studentLastName: studentLastName,
                studentEmail: studentEmail,
                checkpointOralPresentation: checkpointOralPresentation,
                checkpointAdvising413: checkpointAdvising413,
                checkpointSubmittedAppl: checkpointSubmittedAppl,
                comments: comments}, function(data, status) {
                hide_spinner();
                show_toast();
            });
            return false;
        }

        function checkpoint_toggled(id, type) {
            var isChecked = document.getElementById(type).checked;
            var dateField = document.getElementById("date_" + type);
            if (isChecked) {
                var now = new Date();
                dateField.value = now.format("mm/dd/yyyy");
                $('#date_' + type).parent().addClass('is-dirty');
            } else {
                dateField.value = "";
                $('#date_' + type).parent().removeClass('is-dirty');
            }
            update_checkpoints(id);
            return true;
        }

        function generateList(button, type) {
            var start_date;
            var end_date;
            var url = "generate-list?token=" + token + "&type=" + type;
            if (type == 'graduated_yr'){
                start_date = $( "#grad_mon_start" ).val() + "@"+$( "#grad_day_start" ).val()+"@"+$( "#grad_yr_start" ).val();
                end_date =$( "#grad_mon_end" ).val() + "@"+$( "#grad_day_end" ).val()+"@"+$( "#grad_yr_end" ).val();
                url = "generate-list?token=" + token + "&type=" + type +"&start_date="+start_date+"&end_date="+end_date;
            }

            if (type == '413_yr'){
                start_date = $( "#413_mon_start" ).val() + "@"+$( "#413_day_start" ).val()+"@"+$( "#413_yr_start" ).val();
                end_date =$( "#413_mon_end" ).val() + "@"+$( "#413_day_end" ).val()+"@"+$( "#413_yr_end" ).val();
                url = "generate-list?token=" + token + "&type=" + type +"&start_date="+start_date+"&end_date="+end_date;
            }
            var iframe = document.createElement("iframe");
            iframe.setAttribute("src", url);
            iframe.setAttribute("style", "display: none");
            document.body.appendChild(iframe);
            /*
            button.disabled = true;
            show_spinner();
            $.post("generate-list", {token: token, type: type}, function(data, status) {
                hide_spinner();
                button.disabled = false;
                var listWindow = window.open("", "", "width=800, height=800");
                listWindow.document.write(data);
                listWindow.document.close();
            });
            */
            return false;
        }

    </script>
</head>
<body class="mdl-demo mdl-color-text--grey-700 mdl-base">
<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
            <h3>San Francisco State University - Computer Science</h3>
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div id="navigation" class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark display-none">
            <a href="#senior_advising" class="mdl-layout__tab is-active">Senior Advising</a>
            <a href="#advising413" class="mdl-layout__tab">413 Advising List</a>
            <a href="#graduation_list" class="mdl-layout__tab">Graduation List</a>
        </div>
    </header>
    <main id="section_login" class="mdl-layout__content">
        <div class="mdl-layout__tab-panel is-active">
            <section class="section--center mdl-grid mdl-grid--no-spacing">
                <div class="mdl-card__supporting-text">
                    <h4>Login</h4>
                    <form onsubmit="return login();">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="password" id="passwd" />
                            <label class="mdl-textfield__label" for="passwd">Password</label>
                            <span class="mdl-textfield__error">Wrong password!</span>
                        </div>
                    </form>
                    <!--
                                        <button onclick="return student_login();">Student Access</button>
                    -->
                </div>
            </section>
        </div>
    </main>
    <main id="section_main" class="mdl-layout__content display-none">
        <section class="section--center mdl-grid background-color-white">
            <div class="full-width">
                <div id="spinner" class="mdl-spinner mdl-spinner--single-color mdl-js-spinner" style="float: right"></div>
            </div>
        </section>
        <div class="mdl-layout__tab-panel is-active" id="senior_advising">
            <section class="section--center mdl-grid mdl-grid--no-spacing">
                <div class="mdl-card__supporting-text">
                    <h4>Senior Advising</h4>
                    <form onsubmit="return lookup_student();">
                        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="student_id" />
                            <label class="mdl-textfield__label" for="student_id">Student ID</label>
                            <span class="mdl-textfield__error">Input is not a student ID!</span>
                        </div>
                    </form>
                </div>
                <div id="section_student_info" style="display: none">
                    <img style="float: right" onclick="show_print_page()" src="ic_print_black_24dp_1x.png"/>
                    <div id="student_info"></div>
                </div>
            </section>
        </div>

        <div class="mdl-layout__tab-panel" id="advising413">
            <section class="section--center mdl-grid mdl-grid--no-spacing">
                <div class="mdl-card__supporting-text">
                    <h4>413 Advising List</h4>
                    <p>Compile a list of all students who have received 413 advising. A future version will
                        allow to specify a date range.</p>
                    <button class="mdl-button mdl-js-button mdl-button--fab" onclick="return generateList(this, '413')">
                        <i class="material-icons">forward</i>
                    </button>
                    <br><br><br>
                    <p>Compile a list of all students who are currently enrolled in 413 advising in the current semester. </p>

                    <button class="mdl-button mdl-js-button mdl-button--fab" onclick="return generateList(this, '413_current')">
                        <i class="material-icons">forward</i>
                    </button>
                    <br><br><br>
                    <p>Complile a list of all students who have applied to graduate within a particular date range</p>
                    Start Date:
                    <select id="413_day_start">
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="413_mon_start">
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="413_yr_start">
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019" selected>2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                    </select>
                    <br><br>
                    End Date:&nbsp;&nbsp;
                    <select id="413_day_end">
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="413_mon_end">
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="413_yr_end">
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019" selected>2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                    </select>
                    <br><br>
                    <button class="mdl-button mdl-js-button mdl-button--fab" onclick="return generateList(this, '413_yr')">
                        <i class="material-icons">forward</i>
                    </button>

                </div>
            </section>
        </div>
        <div class="mdl-layout__tab-panel" id="graduation_list">
            <section class="section--center mdl-grid mdl-grid--no-spacing">
                <div class="mdl-card__supporting-text">
                    <h4>Graduation List</h4>
                    <p>Compile a list of all students who have graduated. A future version will
                        allow to specify a date range.</p>
                    <button class="mdl-button mdl-js-button mdl-button--fab" onclick="return generateList(this, 'graduated')">
                        <i class="material-icons">forward</i>
                    </button>
                    <br><br><br>
                    <p>Compile a list of all students who have applied to graduate during the current semester.</p>
                    <button class="mdl-button mdl-js-button mdl-button--fab" onclick="return generateList(this, 'graduated_current')">
                    <i class="material-icons">forward</i>
                    </button>
                    <br><br><br>

                    <p>Complile a list of all students who have applied to graduate within a particular date range</p>
                    Start Date:
                    <select id="grad_day_start">
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="grad_mon_start">
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="grad_yr_start">
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019" selected>2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                    </select>
                    <br><br>
                    End Date:&nbsp;&nbsp;
                    <select id="grad_day_end">
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="09">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="grad_mon_end">
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="grad_yr_end">
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019" selected>2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                    </select>
                    <br><br>
                    <button class="mdl-button mdl-js-button mdl-button--fab" onclick="return generateList(this, 'graduated_yr')">
                    <i class="material-icons">forward</i>
                    </button>

                </div>
            </section>
        </div>
    </main>
    <div id="toast" class="mdl-js-snackbar mdl-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
    </div>
</div>
<script src="jquery-2.1.4.min.js"></script>
<script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
</body>
</html>
